Feb 9th,10th:
-Setup and check

Feb 10th:
- Setup github in home directory and as public repository to check working
- Tried to update paths and find path to xrootd, 
issues found where there are interlinking path to /afs and/nfs directories.

Feb 11th
- Create new and clean conda environment to test code
Used: 
    conda create -n acd_test -c conda-forge python=3.10 fermitools xrootd gcc_linux-64 gxx_linux-64 root
Note, this might work without fermitools, but adding it here just in case. To troubleshoot make a new version without fermitools to see if it works
Remember for conda, start with:
    export CONDA_PREFIX=/sdf/home/a/abhishek/miniconda
    export PATH=${CONDA_PREFIX}/bin/:$PATH
    source ${CONDA_PREFIX}/etc/profile.d/conda.sh
- Made directory releases,wrkdir and python to start working
- Added config file which is also uploaded to github
- Made folders as stated in DGreen doc.

Feb 13th/17th
- Added setup for terminal to fermi environment (can only be run from fermi-devl)
   For future reference:
   ssh -Y abhishek@s3dflogin-mfa.slac.stanford.edu
   ssh fermi-devl
- Following steps from DGreen doc.
  Made scons_make like stated and ran cv checkout.
  Updated mootcore file ... 
- Issues with python2!!!! and python 3!!!!, cant change every python call...yet.... so changing conda environment
 new environment (note anydependancies added later are also added in this one path)
 
didnt work: 
 conda create -n acd_test2 -c conda-forge python=2.7 xrootd root=6.16 scons f2c emacs  
 conda create -n acd_test2 -c conda-forge python=2.7 root=5.34 scons xrootd f2c

testing
 conda create -n acd_test2 -c conda-forge python=2.7.18 root=6.16.00 xrootd=4.9.1 scons=3.1.2 f2c gcc_linux-64=7 gxx_linux-64=7 gfortran_linux-64=7
 conda install -c conda-forge gfortran_linux-64
- make sure that 1st line python path in scons is changed to /sdf/home/a/abhishek/miniconda/envs/acd_test2/bin/python
get location by which scons, my path ~/miniconda/envs/acd_test2/bin/scons

-figured out issue with not finding f2c stemns from locate looking in /usr/bin. 
didnt work: added lines to the setup.sh file to make sure locate reads the correct directory
 basically:
 updatedb -l 0 -o $CONDA_PREFIX/locate.db -U $CONDA_PREFIX
 alias locate='locate -d $CONDA_PREFIX/locate.db'
finally_worked **** - 
 ln -s /sdf/group/fermi/a/ground/GLAST_EXT/redhat6-x86_64-64bit-gcc44/f2c/3.4-gl2/gcc44 \
      /sdf/group/fermi/a/ground/GLAST_EXT/redhat6-x86_64-64bit-gcc44/f2c/3.4-gl2/gcc85
 Turns out it was looking for a particular gcc 85 folder in the group directory, added a link to fix it.


Feb 19th:
Still not working:
- scons is probably loaded from /sdf/data/fermi/n/u52/ReleaseManagerBuild/redhat6-x86_64-64bit-gcc44/Optimized/GlastRelease/20-09-10/sconsTools/
- The ISSUE IS GCC!!!!!! it keeps on trying to go for gcc85 as thats what it finds, the easiers wau is to make a fake gcc which says it is 4.4 gcc but is not inreality.... 
ADDED a gcc_linker in github needs to be run with scons!!!! and also 
export CXX=/sdf/home/a/abhishek/ACD_calib/ACD_calib_github_software/gpp_linker
export CC=/sdf/home/a/abhishek/ACD_calib/ACD_calib_github_software/gcc_linker

Feb20th:
-scons appear to be running but no mootfile, even after keep config file exactly as given in doc.
- issue found by
   '''./scons_make 2>&1 | grep -i "error\|failed\|cannot find\|undefined" | head -30'''
- issue: SCons import failed. Unable to find engine files in:
ImportError: No module named SCons.Script
- turns out scons was not built for python I am using
****** in ~/miniconda/envs/acd_test2/bin/scons
change /sdf/home/a/abhishek/miniconda/envs/acd_test2/bin/python
- ISSUE calibGenACD/ and  mootCore/ are not in $RELEASE
- ok now we are installing.
- make sure scons is run with ./scons_make > /sdf/home/a/abhishek/ACD_calib/build_out.log 2> /sdf/home/a/abhishek/ACD_calib/build_err.log to troubleshoot
- PARENT_LIB=/sdf/group/fermi/n/u52/ReleaseManagerBuild/redhat6-x86_64-64bit-gcc44/Optimized/GlastRelease/20-09-10/lib/redhat6-x86_64-64bit-gcc44-Optimized/
(acd_test2) [abhishek@sdfiana021 ACD_calib]$ LOCAL_LIB=/sdf/home/a/abhishek/ACD_calib/releases/GR-20-09-10/lib/redhat8-x86_64-64bit-gcc44-Optimized
(acd_test2) [abhishek@sdfiana021 ACD_calib]$ LOCAL_LIB=/sdf/home/a/abhishek/ACD_calib/releases/GR-20-09-10/lib/redhat8-x86_64-64bit-gcc44-Optimized/
(acd_test2) [abhishek@sdfiana021 ACD_calib]$ cd $LOCAL_LIB
(acd_test2) [abhishek@sdfiana021 redhat8-x86_64-64bit-gcc44-Optimized]$ for lib in $PARENT_LIB/lib*.so $PARENT_LIB/lib*.a; do
>     ln -sf $lib $LOCAL_LIB/$(basename $lib)
> done

Feb 23:
-Issue with how the ACD calibrations was built, turns out there was a possible cxx version mismatch. To fix it 
while using scons_make add argument -D_GLIBCXX_USE_CXX11_ABI=0 , This tells gcc to use the old ABI compatible with the parent libs. 
-Modifying setup_init and setup_package files as there is a lot of commands now
- Still finding an issue, as linking the files gets overwritten by fresh install, solution check if sconstruct is detecting the directory in some manner,
- Found with claude that there is a simpler way to override the system mismathc, You can override the variant directly! Add --variant to your scons call:
-adding --variant=redhat6-x86_64-64bit-gcc44-Optimized to scons 
- Ran for everything except:
sdf/home/a/abhishek/ACD_calib/releases/GR-20-09-10/calibGenACD/build/redhat6-x86_64-64bit-gcc44-Optimized/apps/runOverlayPedestal.o
/sdf/home/a/abhishek/ACD_calib/releases/GR-20-09-10/calibGenACD/build/redhat6-x86_64-64bit-gcc44-Optimized/runOverlayPedestal
/sdf/home/a/abhishek/ACD_calib/releases/GR-20-09-10/mootCore/build/redhat6-x86_64-64bit-gcc44-Optimized/src/MootQuery.os
/sdf/home/a/abhishek/ACD_calib/releases/GR-20-09-10/mootCore/build/redhat6-x86_64-64bit-gcc44-Optimized/libmootCore.so
1st 2 are expected, bothom 2 might be an issue

------ Moving to steps beyonf scons:
- Make python and workdir directories in $RELEASE
- cp $RELEASE/mootCore/build/redhat6-x86_64-64bit-gcc44-Optimized/src/py_mootCore.py $RELEASE/python/


########################################################################################
###########
###########
###########              IMP NOTES
###########
###########
########################################################################################

To be done:
- newer glast_release should be built with latest gcc and linux builds so that compatibility issues are less
   If that is done though, it should work with the ACD calibs.
- 